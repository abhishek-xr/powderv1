{"ast":null,"code":"import{useState}from\"react\";import{getDocument,deleteDocument}from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FileList=_ref=>{let{files,onDelete}=_ref;const[selectedFile,setSelectedFile]=useState(null);const[showParsedText,setShowParsedText]=useState(false);const[showPreview,setShowPreview]=useState(false);const handleFetchAndPreview=async fileId=>{try{const file=await getDocument(fileId);setSelectedFile(file);setShowPreview(true);}catch(error){console.error(\"Failed to fetch document:\",error);}};const handleDelete=async fileId=>{try{await deleteDocument(fileId);onDelete(fileId);}catch(error){console.error(\"Failed to delete document:\",error);}};const handleShowParsedText=file=>{setSelectedFile(file);setShowParsedText(true);};return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-6 text-gray-800\",children:\"Uploaded Files\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-4\",children:files.map(file=>/*#__PURE__*/_jsxs(\"li\",{className:\"p-4 border rounded-lg shadow-md bg-white flex justify-between items-center hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:file.filename}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFetchAndPreview(file.file_id),className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors\",children:\"Preview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleShowParsedText(file),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors\",children:\"Parsed Text\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(file.file_id),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors\",children:\"Delete\"})]})]},file.file_id))}),showPreview&&selectedFile&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center animate-fade-in\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded shadow-lg max-w-7xl w-full relative\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold mb-4 text-center\",children:[\"PDF Preview: \",selectedFile.filename]}),/*#__PURE__*/_jsx(\"iframe\",{src:`http://127.0.0.1:8000/uploads/${selectedFile.filepath}`,title:\"PDF Preview\",className:\"w-full h-[800px] border rounded\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end mt-4 space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors\",onClick:()=>setShowParsedText(true),children:\"Show Parsed Text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors\",onClick:()=>setShowPreview(false),children:\"Close\"})]})]})}),showParsedText&&selectedFile&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center animate-fade-in\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded shadow-lg max-w-lg w-full relative\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold mb-4 text-center\",children:\"Parsed Text\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-y-auto max-h-64 border p-4 rounded bg-gray-50\",children:selectedFile.parsed_text||\"No parsed text available\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end mt-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors\",onClick:()=>setShowParsedText(false),children:\"Close\"})})]})})]});};export default FileList;","map":{"version":3,"names":["useState","getDocument","deleteDocument","jsx","_jsx","jsxs","_jsxs","FileList","_ref","files","onDelete","selectedFile","setSelectedFile","showParsedText","setShowParsedText","showPreview","setShowPreview","handleFetchAndPreview","fileId","file","error","console","handleDelete","handleShowParsedText","className","children","map","filename","onClick","file_id","src","filepath","title","parsed_text"],"sources":["/Users/elliot/Desktop/amazon assessment/powder/portfolio-api/venv/frontend/src/components/FileList.js"],"sourcesContent":["import { useState } from \"react\";\nimport { getDocument, deleteDocument } from \"../api\";\n\nconst FileList = ({ files, onDelete }) => {\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [showParsedText, setShowParsedText] = useState(false);\n  const [showPreview, setShowPreview] = useState(false);\n\n  const handleFetchAndPreview = async (fileId) => {\n    try {\n      const file = await getDocument(fileId);\n      setSelectedFile(file);\n      setShowPreview(true);\n    } catch (error) {\n      console.error(\"Failed to fetch document:\", error);\n    }\n  };\n\n  const handleDelete = async (fileId) => {\n    try {\n      await deleteDocument(fileId);\n      onDelete(fileId); \n    } catch (error) {\n      console.error(\"Failed to delete document:\", error);\n    }\n  };\n\n  const handleShowParsedText = (file) => {\n    setSelectedFile(file);\n    setShowParsedText(true);\n  };\n\n  return (\n    <div className=\"mt-6\">\n      <h3 className=\"text-2xl font-bold mb-6 text-gray-800\">Uploaded Files</h3>\n      <ul className=\"space-y-4\">\n        {files.map((file) => (\n          <li\n            key={file.file_id}\n            className=\"p-4 border rounded-lg shadow-md bg-white flex justify-between items-center hover:shadow-lg transition-shadow\"\n          >\n            <span className=\"font-medium text-gray-700\">{file.filename}</span>\n            <div className=\"flex space-x-4\">\n              <button\n                onClick={() => handleFetchAndPreview(file.file_id)}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors\"\n              >\n                Preview\n              </button>\n              <button\n                onClick={() => handleShowParsedText(file)}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors\"\n              >\n                Parsed Text\n              </button>\n              <button\n                onClick={() => handleDelete(file.file_id)}\n                className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors\"\n              >\n                Delete\n              </button>\n            </div>\n          </li>\n        ))}\n      </ul>\n\n      {/* PDF Preview Modal */}\n      {showPreview && selectedFile && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center animate-fade-in\">\n          <div className=\"bg-white p-6 rounded shadow-lg max-w-7xl w-full relative\">\n            <h3 className=\"text-lg font-bold mb-4 text-center\">\n              PDF Preview: {selectedFile.filename}\n            </h3>\n            <iframe\n              src={`http://127.0.0.1:8000/uploads/${selectedFile.filepath}`}\n              title=\"PDF Preview\"\n              className=\"w-full h-[800px] border rounded\"\n            ></iframe>\n            <div className=\"flex justify-end mt-4 space-x-4\">\n              <button\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors\"\n                onClick={() => setShowParsedText(true)}\n              >\n                Show Parsed Text\n              </button>\n              <button\n                className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors\"\n                onClick={() => setShowPreview(false)}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Parsed Text Modal */}\n      {showParsedText && selectedFile && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center animate-fade-in\">\n          <div className=\"bg-white p-6 rounded shadow-lg max-w-lg w-full relative\">\n            <h3 className=\"text-lg font-bold mb-4 text-center\">Parsed Text</h3>\n            <div className=\"overflow-y-auto max-h-64 border p-4 rounded bg-gray-50\">\n              {selectedFile.parsed_text || \"No parsed text available\"}\n            </div>\n            <div className=\"flex justify-end mt-4\">\n              <button\n                className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors\"\n                onClick={() => setShowParsedText(false)}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FileList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}